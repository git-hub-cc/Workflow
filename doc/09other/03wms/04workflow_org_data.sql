-- H2 2.2.224;
SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS "SA" SALT 'eb035733b95de2c0' HASH 'e5fe21137b666cea903cfd8516ec51d7d10de273e4ef7f0c98bea564a6638dc2' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."APP_DEPARTMENT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 8) NOT NULL,
    "NAME" CHARACTER VARYING(255) NOT NULL,
    "ORDER_NUM" INTEGER,
    "MANAGER_ID" CHARACTER VARYING(255),
    "PARENT_ID" BIGINT
);          
ALTER TABLE "PUBLIC"."APP_DEPARTMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");               
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.APP_DEPARTMENT;          
INSERT INTO "PUBLIC"."APP_DEPARTMENT" VALUES
(1, U&'IT\90e8', 0, NULL, NULL),
(2, U&'\4ed3\5e93\7ba1\7406\90e8', 1, NULL, NULL),
(3, U&'\5165\5e93\7ec4', 0, NULL, 2),
(4, U&'\51fa\5e93\7ec4', 1, NULL, 2),
(5, U&'\5e93\5b58\63a7\5236\7ec4', 2, NULL, 2),
(6, U&'\8d28\68c0\7ec4', 4, NULL, 2),
(7, U&'\8d22\52a1\90e8', 2, NULL, NULL);            
CREATE MEMORY TABLE "PUBLIC"."APP_ROLE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 6) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(50) NOT NULL
);   
ALTER TABLE "PUBLIC"."APP_ROLE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7603" PRIMARY KEY("ID");  
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.APP_ROLE;
INSERT INTO "PUBLIC"."APP_ROLE" VALUES
(1, U&'\7cfb\7edf\7ba1\7406\5458\ff0c\62e5\6709\6240\6709\6743\9650', 'ADMIN'),
(2, U&'\666e\901a\7528\6237\ff0c\62e5\6709\57fa\672c\64cd\4f5c\6743\9650', 'USER'),
(3, U&'\7ec4\957f/\4e3b\7ba1', 'TEAM_LEADER'),
(4, U&'\8d28\68c0\5458', 'QC_INSPECTOR'),
(5, U&'\8d22\52a1\5ba1\6279\5458 (\7528\4e8e\9ad8\4ef7\503c\8d44\4ea7\5904\7406)', 'FINANCE_APPROVER');              
CREATE MEMORY TABLE "PUBLIC"."APP_USER"(
    "ID" CHARACTER VARYING(255) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PASSWORD" CHARACTER VARYING(255) NOT NULL,
    "PASSWORD_CHANGE_REQUIRED" BOOLEAN NOT NULL,
    "STATUS" CHARACTER VARYING(255) NOT NULL,
    "DEPARTMENT_ID" BIGINT,
    "MANAGER_ID" CHARACTER VARYING(255)
);           
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_76053" PRIMARY KEY("ID"); 
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER;
INSERT INTO "PUBLIC"."APP_USER" VALUES
('admin', U&'\7cfb\7edf\7ba1\7406\5458', '$2a$10$cdsTzj2JqFfjnbxibHXuautzEDgV9kwjYREciJ13SeZC3eqwAZhN6', FALSE, 'ACTIVE', 1, NULL),
('manager001', U&'\738b\7ecf\7406', '$2a$10$NhF5kgj0W15L2cfkmm822.HTsA2Ibe4gonUXwjBg6HN3SPP8RCNyi', TRUE, 'ACTIVE', 2, NULL),
('leader001', U&'\674e\4e3b\7ba1', '$2a$10$PJJVZY56vgPWvwxIoA9MBO57sVII1rlpiHM/07u/QpKhPNu/iOBF6', FALSE, 'ACTIVE', 3, 'manager001'),
('worker001', U&'\5f20\4e09', '$2a$10$SUwkWIchj9wZUcgZZc92UOZag5pynS1DqUd77Hpj0TN5TGBKhL8VS', FALSE, 'ACTIVE', 3, 'leader001'),
('worker002', U&'\8d75\56db', '$2a$10$jywJ8XoNjrDAdIjqOArtsuX5VNt5QyLqEMsEf5UUpQjnwkEynfzyi', FALSE, 'ACTIVE', 6, 'manager001'),
('worker003', U&'\5b59\4e94', '$2a$10$RcXaVXgkSUN5XZZV9k/CMeTgZWBkl9CmL39c8NWPHn9Kld5ra.bsm', TRUE, 'ACTIVE', 5, 'manager001'),
('finance001', U&'\94b1\4f1a\8ba1', '$2a$10$SDvPRNb0C.pPxcWVet1D3ekFVu7GXlLQYgg/Tn3hdhqeFz3TTQrM.', TRUE, 'ACTIVE', 7, NULL);          
CREATE MEMORY TABLE "PUBLIC"."APP_USER_GROUP"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(100) NOT NULL
);            
ALTER TABLE "PUBLIC"."APP_USER_GROUP" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");               
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER_GROUP;          
INSERT INTO "PUBLIC"."APP_USER_GROUP" VALUES
(1, U&'\5165\5e93\4e3b\7ba1\7ec4', 'INBOUND_SUPERVISORS'),
(2, U&'\8d28\68c0\7ec4', 'QC_GROUP'),
(3, U&'\5e93\5b58\4e3b\7ba1\7ec4', 'INVENTORY_MANAGERS'),
(4, U&'\8d22\52a1\5ba1\6279\7ec4', 'FINANCE_GROUP');              
CREATE MEMORY TABLE "PUBLIC"."USER_GROUPS"(
    "USER_ID" CHARACTER VARYING(255) NOT NULL,
    "GROUP_ID" BIGINT NOT NULL
);               
ALTER TABLE "PUBLIC"."USER_GROUPS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("USER_ID", "GROUP_ID"); 
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.USER_GROUPS;             
INSERT INTO "PUBLIC"."USER_GROUPS" VALUES
('manager001', 1),
('leader001', 3),
('worker002', 2),
('finance001', 4);       
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7605" CHECK("STATUS" IN('ACTIVE', 'INACTIVE', 'LOCKED')) NOCHECK;         
ALTER TABLE "PUBLIC"."APP_DEPARTMENT" ADD CONSTRAINT "PUBLIC"."UK_5CTJLA2NR735HA6OWCW4QKSJB" UNIQUE("MANAGER_ID");            
ALTER TABLE "PUBLIC"."APP_DEPARTMENT" ADD CONSTRAINT "PUBLIC"."UK_2VTXVTH015THDUWPQFMHBHLOI" UNIQUE("NAME");  
ALTER TABLE "PUBLIC"."APP_USER_GROUP" ADD CONSTRAINT "PUBLIC"."UK_ESEJYMA9SWEJ7O3058IPNESLC" UNIQUE("NAME");  
ALTER TABLE "PUBLIC"."APP_ROLE" ADD CONSTRAINT "PUBLIC"."UK_DYF5HU50DDVJOY0PFPLEEVWFL" UNIQUE("NAME");        
ALTER TABLE "PUBLIC"."USER_GROUPS" ADD CONSTRAINT "PUBLIC"."FKNP4KXMGPRNY035UMJRSC0SNR1" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."APP_USER"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."FK6806FL5JQLXGU0QPSC6J30BCM" FOREIGN KEY("DEPARTMENT_ID") REFERENCES "PUBLIC"."APP_DEPARTMENT"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."APP_DEPARTMENT" ADD CONSTRAINT "PUBLIC"."FKH6UNY7VI0WNKWKFJTRBF0CGM6" FOREIGN KEY("PARENT_ID") REFERENCES "PUBLIC"."APP_DEPARTMENT"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."APP_DEPARTMENT" ADD CONSTRAINT "PUBLIC"."FKO6YLOYT9PU74U5U6T6B5WR2T9" FOREIGN KEY("MANAGER_ID") REFERENCES "PUBLIC"."APP_USER"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."FKA6WTDHDIJRQ38P4CQW03YWFN6" FOREIGN KEY("MANAGER_ID") REFERENCES "PUBLIC"."APP_USER"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."USER_GROUPS" ADD CONSTRAINT "PUBLIC"."FK9NY9O1O211RUNHLJWLJKT4221" FOREIGN KEY("GROUP_ID") REFERENCES "PUBLIC"."APP_USER_GROUP"("ID") NOCHECK;          
